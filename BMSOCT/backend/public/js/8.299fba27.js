(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{c35c:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("div",{staticClass:"text-h4 items-center q-mb-lg full-width row"},[a("div",{staticClass:"col-12"},[t._v("Dashboard")])]),a("q-card",{staticClass:"bg-transparent no-shadow no-border q-mb-xl"},[a("q-card-section",{staticClass:"q-pa-none"},[a("div",{staticClass:"row q-col-gutter-sm "},t._l(t.items,(function(e,n){return a("div",{key:n,staticClass:"col-md-3 col-sm-12 col-xs-12"},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"q-pa-none q-ml-xs",style:"background-color: "+e.color1,attrs:{clickable:""},on:{click:function(a){return t.viewDocument(e)}}},[a("q-item-section",{staticClass:" q-pa-lg q-mr-none text-white",style:"background-color: "+e.color2,attrs:{side:""}},[a("q-icon",{attrs:{name:e.icon,color:"white",size:"24px"}})],1),a("q-item-section",{staticClass:" q-pa-md q-ml-none  text-white"},[a("q-item-label",{staticClass:"text-white text-h6 text-weight-bolder"},[t._v(t._s(e.value))]),a("q-item-label",[t._v(t._s(e.title))])],1)],1)],1)})),0)])],1),"Admin"===t.$user.role?a("q-table",{attrs:{title:"Covid19 Contract Tracing ("+t.contactTracings.total+")","title-class":"q-mt-sm",data:t.contactTracings.data,columns:t.columns,"row-key":"_id",pagination:t.pagination,loading:t.loading,"rows-per-page-options":[5,10,20,50,100],filter:t.filter,"binary-state-sort":""},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e},nativeOn:{click:function(a){t.viewItemLayout=!0,t.itemDetails=e.row}}},[a("q-td",{key:"_id",attrs:{props:e}},[t._v("\n          "+t._s(e.rowIndex+1)+".\n        ")]),a("q-td",{key:"user",attrs:{props:e}},[t._v("\n          "+t._s(e.row.user.firstName)+" "+t._s(e.row.user.lastName)+"\n        ")]),a("q-td",{key:"date",attrs:{props:e}},[t._v("\n          "+t._s(e.row.date)+"\n        ")]),a("q-td",{key:"status",attrs:{props:e}},[t._v("\n          "+t._s(e.row.status)+"\n        ")]),a("q-td",{key:"conducted",attrs:{props:e}},[t._v("\n          "+t._s(e.row.conducted)+"\n        ")]),a("q-td",{attrs:{align:"center"}},[a("div",{staticClass:"q-gutter-xs"},[a("q-btn",{attrs:{dense:"",icon:"find_in_page",color:"primary"},on:{click:function(a){t.addItemLayout=!0,t.contactTracing=e.row,t.action="view"}}}),"Admin"===t.$user.role?a("q-btn",{attrs:{dense:"",icon:"edit",color:"secondary"},on:{click:function(a){t.addItemLayout=!0,t.contactTracing=e.row,t.action="edit"}}}):t._e(),"Admin"===t.$user.role?a("q-btn",{attrs:{dense:"",icon:"delete",color:"negative"},on:{click:function(a){return t.removeContactTracing(e.row._id)}}}):t._e()],1)])],1)]}},{key:"top-right",fn:function(){return["Admin"===t.$user.role?a("q-btn",{staticClass:"q-mr-md",attrs:{color:"secondary",icon:"add",label:"Add Contact Tracing"},on:{click:function(e){t.addItemLayout=!0,t.action="add"}}}):t._e(),a("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0}],null,!1,3879312518)}):t._e(),a("q-dialog",{on:{hide:function(e){t.contactTracing={}}},model:{value:t.addItemLayout,callback:function(e){t.addItemLayout=e},expression:"addItemLayout"}},[a("q-layout",{staticClass:"bg-white",attrs:{view:"Lhh lpR fff",container:""}},[a("q-header",{staticClass:"bg-primary"},[a("q-toolbar",[a("q-toolbar-title",["view"===t.action?a("span",[t._v("View")]):t._e(),"add"===t.action?a("span",[t._v("Add")]):t._e(),"edit"===t.action?a("span",[t._v("Edit")]):t._e(),t._v(" Contact Tracing\n          ")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1)],1),a("q-footer",{staticClass:"bg-white"},[a("q-toolbar",[a("q-toolbar-title"),"add"===t.action||"edit"===t.action?a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"save",color:"primary",label:"Save"},on:{click:function(e){return t.addContactTracing()}}}):t._e()],1)],1),a("q-page-container",[a("q-page",{attrs:{padding:""}},[a("div",{staticClass:"q-col-gutter-xl"},[a("q-select",{attrs:{label:"Name",readonly:"view"===t.action,"use-input":"","emit-value":"","map-options":"","input-debounce":"600","use-chips":"",options:t.usersOptions,"option-label":function(t){return null===t?"":t.firstName+" "+t.lastName},behavior:"dialog"},on:{filter:t.filterFnUsers},scopedSlots:t._u([{key:"option",fn:function(e){return[a("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:t._s(e.opt.label)}}),a("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.opt.firstName)+" "+t._s(e.opt.lastName))])],1)],1)]}}]),model:{value:t.contactTracing.user,callback:function(e){t.$set(t.contactTracing,"user",e)},expression:"contactTracing.user"}}),a("q-input",{attrs:{readonly:"view"===t.action,type:"date","stack-label":"",label:"Date"},model:{value:t.contactTracing.date,callback:function(e){t.$set(t.contactTracing,"date",e)},expression:"contactTracing.date"}}),a("q-select",{attrs:{readonly:"view"===t.action,options:t.statusOptions,label:"Status"},model:{value:t.contactTracing.status,callback:function(e){t.$set(t.contactTracing,"status",e)},expression:"contactTracing.status"}}),a("q-select",{attrs:{readonly:"view"===t.action,options:t.conductedOptions,label:"Conducted"},model:{value:t.contactTracing.conducted,callback:function(e){t.$set(t.contactTracing,"conducted",e)},expression:"contactTracing.conducted"}})],1)])],1)],1)],1)],1)},o=[],i=(a("d3b7"),a("159b"),a("7db0"),a("c740"),a("a434"),a("4de4"),{name:"PageIndex",data:function(){return{items:[{title:"Suspected",icon:"warning",value:"0",color1:"#d900ff",color2:"#9c27b0"},{title:"Confirmed",icon:"thumb_up",value:"0",color1:"#ffd663",color2:"#f2c037"},{title:"Death",icon:"close",value:"0",color1:"#ff001e",color2:"#c10015"},{title:"Recovery",icon:"check",value:"0",color1:"#00d632",color2:"#21ba45"}],action:"",addItemLayout:!1,usersOptions:[],statusOptions:["Suspected","Confirmed","Death","Recovery"],conductedOptions:["Hospital","LGU"],contactTracing:{user:null,date:null,status:null,conducted:null},contactTracings:{data:[],total:0},filter:"",loading:!1,rowsPerPageData:[],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:20,rowsNumber:0},columns:[{name:"_id",align:"left",label:"No.",field:"_id",sortable:!0},{name:"user",align:"left",label:"User",field:"user",sortable:!0},{name:"date",align:"left",label:"Date",field:"date",sortable:!0},{name:"status",align:"left",label:"Status",field:"status",sortable:!0},{name:"conducted",align:"left",label:"Conducted",field:"conducted",sortable:!0},{name:"",align:"center",label:"Action",field:"",sortable:!0}]}},mounted:function(){var t=this;this.queryDocument(),this.loadUsers(""),this.items.forEach((function(e){var a={status:e.title};t.$feathersClient.service("covid-19-contact-tracing").find({query:a}).then((function(t){console.log(t),e.value=t.total})).catch((function(t){console.error("Error",t)}))}))},methods:{removeContactTracing:function(t){var e=this;this.$q.dialog({title:"Confirm",position:"top",message:"Are you sure you want to delete?",persistent:!0,ok:{unelevated:!0,push:!1,color:"negative"},cancel:{flat:!0,color:"negative"}}).onOk((function(){e.$feathersClient.service("covid-19-contact-tracing").remove(t).then((function(a){var n=e.contactTracings.data.findIndex((function(e){return e._id===t}));e.contactTracings.data.splice(n,1),e.$q.notify({position:"top",color:"positive",timeout:2e3,icon:"check",message:"It has been successfully deleted."})}))})).onCancel((function(){})).onDismiss((function(){}))},filterFnUsers:function(t,e){this.loadUsers(t),e()},loadUsers:function(t){var e=this,a={$limit:50};""!==t&&(a.$search=t),this.$feathersClient.service("users").find({query:a}).then((function(t){e.usersOptions=t.data})).catch((function(t){console.log(t)}))},addContactTracing:function(){var t=this;"add"===this.action?(this.contactTracing.createdAt=Date.now(),this.$feathersClient.service("covid-19-contact-tracing").create(this.contactTracing).then((function(e){t.contactTracings.data.unshift(e),t.$q.notify({position:"top",color:"positive",timeout:2e3,icon:"check",message:"It has been successfully created."})}))):this.$feathersClient.service("covid-19-contact-tracing").patch(this.contactTracing._id,this.contactTracing).then((function(e){t.$q.notify({position:"top",color:"positive",timeout:2e3,icon:"check",message:"It has been successfully updated."})}))},queryDocument:function(){this.onRequest({pagination:this.pagination,filter:void 0})},onRequest:function(t){var e=this;this.loading=!0;var a=(t.pagination.page-1)*t.pagination.rowsPerPage;this.pagination=t.pagination;var n={$limit:t.pagination.rowsPerPage,$skip:a,$sort:{createdAt:-1}};""!==this.filter&&(n.$search=this.filter),null!==t.pagination.sortBy&&(n.$sort={},n.$sort["".concat(t.pagination.sortBy)]=t.pagination.descending?1:-1),setTimeout((function(){e.$feathersClient.service("covid-19-contact-tracing").find({query:n}).then((function(t){e.contactTracings=t,e.pagination.rowsNumber=t.total,e.loading=!1})).catch((function(t){console.error("Error",t),e.loading=!1}))}),300)}}}),c=i,s=a("2877"),r=a("9989"),l=a("f09f"),d=a("a370"),u=a("66e5"),p=a("4074"),f=a("0016"),g=a("0170"),m=a("eaac"),v=a("bd08"),b=a("db86"),h=a("9c40"),q=a("27f9"),y=a("24e8"),w=a("4d5a"),_=a("e359"),T=a("65c6"),C=a("6ac5"),k=a("7ff0"),$=a("09e3"),x=a("ddd8"),Q=a("714f"),I=a("7f67"),P=a("eebe"),D=a.n(P),L=Object(s["a"])(c,n,o,!1,null,null,null);e["default"]=L.exports;D()(L,"components",{QPage:r["a"],QCard:l["a"],QCardSection:d["a"],QItem:u["a"],QItemSection:p["a"],QIcon:f["a"],QItemLabel:g["a"],QTable:m["a"],QTr:v["a"],QTd:b["a"],QBtn:h["a"],QInput:q["a"],QDialog:y["a"],QLayout:w["a"],QHeader:_["a"],QToolbar:T["a"],QToolbarTitle:C["a"],QFooter:k["a"],QPageContainer:$["a"],QSelect:x["a"]}),D()(L,"directives",{Ripple:Q["a"],ClosePopup:I["a"]})}}]);